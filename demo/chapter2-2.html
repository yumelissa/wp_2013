<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=big5" />
<title>Little Prince chapter2</title>
</head>

<body class="color_change" style="overflow-x:hidden; background-image:url(pic/ch2back.png); ">
<div style="height:300px;"></div>

<div id="grow_div" style="height:1000px; position:relative; z-index:-2;">
<div id="text" style="position:absolute; z-index:6; width:400px; margin-left:890px; margin-top:100px; font-size:18px; line-height:1.5; opacity:1; color:#FFFFFF">
	<div id="text_rose" style="position:relative"><p>And the little prince, completely abashed, went to look for a sprinkling-can of fresh water. So, he tended the flower. So, too, she began very quickly to torment him with her vanity — which was, if the truth be known, a little difficult to deal with. One day, for instance, when she was speaking of her four thorns, she said to the little prince: <br>
	"Let the tigers come with their claws!"
	</p></div>
	<div id="text_screen" style="position:relative"><p>"There are no tigers on my planet," the little prince objected. "And, anyway, tigers do not eat weeds." <br>
	"I am not a weed," the flower replied, sweetly.<br>
	"Please excuse me..."<br>
	"I am not at all afraid of tigers," she went on, "but I have a horror of drafts. I suppose you wouldn't have a screen for me?"</p></div>
	<div id="text_glass" style="position:relative"><p>"A horror of drafts — that is bad luck, for a plant," remarked the little prince, and added to himself, "This flower is a very complex creature..."<br>
	"At night I want you to put me under a glass globe. It is very cold where you live. In the place I came from — "
	But she interrupted herself at that point. She had come in the form of a seed. She could not have known anything of any other worlds. Embarrassed over having let herself be caught on the verge of such a naive untruth, she coughed two or three times, in order to put the little prince in the wrong.
	"The screen?"<br>
	"I was just going to look for it when you spoke to me..."<br>
	Then she forced her cough a little more so that he should suffer from remorse just the same. So the little prince, in spite of all the good will that was inseparable from his love, had soon come to doubt her. He had taken seriously words which were without importance, and it made him very unhappy.
	</p></div>
	<div id="text_glass_4" style="position:relative"><p>
	"I ought not to have listened to her," he confided to me one day. "One never ought to listen to the flowers. One should simply look at them and breathe their fragrance. Mine perfumed all my planet. But I did not know how to take pleasure in all her grace. This tale of claws, which disturbed me so much, should only have filled my heart with tenderness and pity."
	</p></div>
	<div id="text_glass_5" style="position:relative"><p>
	"The fact is that I did not know how to understand anything! I ought to have judged by deeds and not by words. She cast her fragrance and her radiance over me. I ought never to have run away from her... I ought to have guessed all the affection that lay behind her poor little stratagems. Flowers are so inconsistent! But I was too young to know how to love her …"
	</p></div>
</div>
<img src="pic/waterfall.png"  style="z-index:2; position:absolute; top:-200px; left:2000px; width:120px; height:80px; margin-left:350px" id="waterfall" />
<img id="glass" src="pic/glass.png" style="position:absolute; width:150px; height:240px; top:-200px; left:2000px; margin-left:440px; margin-top:180px; z-index:4" />
<img id="screen" src="pic/screen.png" style="z-index:3; position:absolute; top:-200px; left:2000px; width:200px; height:240px; margin-left:500px; margin-top:210px; transform:rotate(15deg); -webkit-transform:rotate(15deg);" />
<img src="pic/rose.png" style="width:120px; height:200px; margin-left:450px; margin-top:200px; z-index:5; position:absolute;" id="rose"/>
<img src="pic/earth_norose.png" style="width:700px; height:700px; top:50px;  position:absolute; z-index:-1; margin-top:250px; margin-left:150px" id="earth_big"/ >
</div>

<div id="pic_div" style="height:600px; position:relative; z-index:-2;">
<div id="text_2" style="position:absolute; z-index:2; width:380px; margin-left:850px; margin-top:100px; font-size:18px; line-height:1.5; opacity:1; color:#FFFFFF">
<div id="scroll_1"><p>I believe that for his escape he took advantage of the migration of a flock of wild birds.  On the morning of his departure he put his planet in perfect order. He carefully cleaned out his active volcanoes. He possessed two active volcanoes; and they were very convenient for heating his breakfast in the morning. He also had one volcano that was extinct. But, as he said, "One never knows!" So he cleaned out the extinct volcano, too. If they are well cleaned out, volcanoes burn slowly and steadily, without any eruptions. Volcanic eruptions are like fires in a chimney.</p></div>
<div id="scroll_3"><p>"Goodbye," he said to the flower.<br>
But she made no answer.<br>
"Goodbye," he said again.<br>
The flower coughed. But it was not because she had a cold.<br>
"I have been silly," she said to him, at last. "I ask your forgiveness. Try to be happy..."<br>
He was surprised by this absence of reproaches. He stood there all bewildered, the glass globe held arrested in mid-air. He did not understand this quiet sweetness.<br>
"Of course I love you," the flower said to him. "It is my fault that you have not known it all the while. That is of no importance. But you — you have been just as foolish as I. Try to be happy... Let the glass globe be. I don't want it any more."<br>
"But the wind — "<br>
"My cold is not so bad as all that... The cool night air will do me good. I am a flower."<br>
</p></div>
<div id="scroll_4"><p>"But the animals — " <br>
"Well, I must endure the presence of two or three caterpillars if I wish to become acquainted with the butterflies. It seems that they are very beautiful. And if not the butterflies — and the caterpillars — who will call upon me? You will be far away... As for the large animals — I am not at all afraid of any of them. I have my claws."
And, naively, she showed her four thorns. Then she added:<br>
"Don't linger like this. You have decided to go away. Now go!"<br>
For she did not want him to see her crying. She was such a proud flower.<br>
</p></div>
</div>

<div id="clean">
<div class="man_walk" style="background-image:url(pic/prcclean1.png); background-repeat:no-repeat; background-size:120px 210px; z-index:1; width:120px; height:210px; margin-top:50px; margin-left:260px; position:absolute"></div>
<div id="blank" style="height:300px; width:100px"></div> 
<img src="pic/earth.png" style="width:400px; height:400px; top:50px;  position:absolute; z-index:-1; margin:150px" id="earth"/ >
</div>
</div>

<div style="height:1000px">
<!--<img src="file:///C|/Users/asus/Documents/Web程式設計/pic/rose.jpg" id="rose-2" style=" z-index:1; width:300px; height:300px; position:absolute;">
<img src="file:///C|/Users/asus/Documents/Web程式設計/pic/rose.jpg" id="rose" style=" z-index:2; width:300px; height:300px; position:absolute;">
<img src="file:///C|/Users/asus/Documents/Web程式設計/pic/rose.jpg" id="rose-3" style=" z-index:3; width:300px; height:300px; position:absolute;">-->
</div>


<script src="jquery.min.js"></script>
<script src="jquery.superscrollorama.js"></script>
<script src="TweenMax.min.js"></script>
<script type="text/javascript">
	$(document).ready(function() {
		//$('body').scrollTop(0);
		$('#text_rose').hide();
		$('#text_screen').hide();
		$('#text_cap').hide();
		$('#text_glass').hide();
		$('#text_glass_4').hide();
		$('#text_glass_5').hide();
		$('#scroll_1').hide();
		$('#scroll_3').hide();
		$('#scroll_4').hide();
		var controller = $.superscrollorama({
			triggerAtCenter: false,
			playoutAnimations: true
		});

					
					//地球旋轉
					controller.pin($('#pic_div'),1000,{
						anim: (new TimelineLite())
						.append(
							TweenMax.fromTo($('#earth'), 20, 
							{css:{rotation: -360}, immediateRender:true}, 
							{css:{rotation: 360}})
										)
					});
	
	});
	

	// keep walking
	var images=['pic/prcclean2.png','pic/prcclean1.png'];
	var i=0;
	
	function walk(){
		$('.man_walk').css('background-image',function(){
			if(i>=images.length){
				i=0;
				var j=-20*i;
			}
			return 'url('+images[i++]+')';
		});
	}
	walk();
	setInterval(walk, 300);
	var non=function(){
		$('#text_rose').hide();
		$('#text_screen').hide();
		$('#text_cap').hide();
		$('#text_glass_4').hide();
		$('#text_glass_5').hide();
		$('#scroll_1').hide();
		$('#scroll_3').hide();
		$('#scroll_4').hide();
	};
	var rose_textshow=function(){
		$('#text_rose').show();
		$('#text_screen').hide();
		$('#text_cap').hide();
		$('#text_glass_4').hide();
		$('#text_glass_5').hide();
		$('#scroll_1').hide();
		$('#scroll_3').hide();
		$('#scroll_4').hide();
	};
	var screen_textshow=function(){
		$('#text_rose').hide();
		$('#text_screen').show();
		$('#text_cap').hide();
		$('#text_glass_4').hide();
		$('#text_glass_5').hide();
		$('#scroll_1').hide();
		$('#scroll_3').hide();
		$('#scroll_4').hide();
	};
	var glass_textshow=function(){
		$('#text_rose').hide();
		$('#text_screen').hide();
		$('#text_glass').show();
		$('#text_glass_4').hide();
		$('#text_glass_5').hide();
		$('#scroll_1').hide();
		$('#scroll_3').hide();
		$('#scroll_4').hide();
	};
	var glass_textshow_4=function(){
		$('#text_rose').hide();
		$('#text_screen').hide();
		$('#text_glass').hide();
		$('#text_glass_4').show();
		$('#text_glass_5').hide();
		$('#scroll_1').hide();
		$('#scroll_3').hide();
		$('#scroll_4').hide();
	};
	var glass_textshow_5=function(){
		$('#text_rose').hide();
		$('#text_screen').hide();
		$('#text_glass').hide();
		$('#text_glass_4').hide();
		$('#text_glass_5').show();
		$('#scroll_1').hide();
		$('#scroll_3').hide();
		$('#scroll_4').hide();
	};
	var scroll_1=function(){
		$('#text_rose').hide();
		$('#text_screen').hide();
		$('#text_cap').hide();
		$('#text_glass_4').hide();
		$('#text_glass_5').hide();
		$('#scroll_1').show();
		$('#scroll_3').hide();
		$('#scroll_4').hide();
	};
	var scroll_3=function(){
		$('#text_rose').hide();
		$('#text_screen').hide();
		$('#text_cap').hide();
		$('#text_glass_4').hide();
		$('#text_glass_5').hide();
		$('#scroll_1').hide();
		$('#scroll_3').show();
		$('#scroll_4').hide();
	};
	var scroll_4=function(){
		$('#text_rose').hide();
		$('#text_screen').hide();
		$('#text_cap').hide();
		$('#text_glass_4').hide();
		$('#text_glass_5').hide();
		$('#scroll_1').hide();
		$('#scroll_3').hide();
		$('#scroll_4').show();
	};
	
	$(window).scroll(function()
	{
		var wintop=$(window).scrollTop(), docheight = $(document).height(), winheight = $(window).height();
		//var  scrolltrigger = 100;
		//var waterheight=$('#waterfall').height();
		//var x=winheight/docheight;
		var position=$('#grow_div').position();
		console.log('wintop='+wintop);
    	console.log('docheight='+docheight);
    	console.log('winheight='+winheight);
		console.log('grow_div='+position.top);
		
		//灑水if
		if(position.top==308 && wintop>=0 && wintop<50) 
		{
			//$('#waterfall').addClass("animated rotateInDownRight");
			(new TimelineLite({onComplete:initScrollAnimations}))
				.to( $('#waterfall'), 1, {css:{opacity:.99, 'margin-top':0, left:'2000px', top:'-200px'}, delay:1, ease:Elastic.easeOut});
			//$('#waterfall').css({'[visibility]':'[visible]'});
			$('#waterfall').hide();
			
		}
		//灑具進來
		else if(position.top==308 && wintop>50 && wintop<150)
		{
			$('#waterfall').show();
			function initScrollAnimations() {
					$('#grow_div').css('display','block');
					var controller = $.superscrollorama();			
					// title tweens								
						controller.addTween(2, TweenMax.to('#waterfall', 1, {css:{top: 50, left: 190, rotation:-720,}, ease:Quad.easeOut}));				
						//controller.addTween(5, TweenMax.to('#waterfall', .5, {css:{top: -600, left: -800, rotation:720-360}, ease:Quad.easeOut}));
							};
			initScrollAnimations();
			console.log('XXXX');
			rose_textshow();
					
		}
//		//澆花
		else if(position.top===308 && wintop>150 && wintop<250)
		{
			//$('#waterfall').css({'[transform]':'[rotate(20deg)]'});
			
			 $('#waterfall').css("transform","rotate(-40deg)");
             $('#waterfall').css("-webkit-transform","rotate(-40deg)"); //給Chrome看的css
			console.log('YYY');
			rose_textshow();
					
		}
//		//灑具離開
		else if(position.top===0 && wintop>250 && wintop<350)
		{
			function initScrollAnimations() {
				var controller = $.superscrollorama();	
				controller.pin($('#grow_div'),300, {
						anim: (new TimelineLite())
							.append(
								TweenMax.fromTo($('#waterfall'), 4, 
									{css:{left:200, top: 100, rotation: -360}, immediateRender:true}, 
									{css:{left:-600, top: -100, rotation: 360}})
									)
					})
			};
			initScrollAnimations();
			rose_textshow();
			//console.log('SSS');
		}
		else
		{
			//$('#waterfall').css({'[top]':'[0px]','[left]':'[0px]'});
			$('#waterfall').hide();
		}
//		
//		
//		//屏風if
		if(position.top<=308 && wintop>350 && wintop<450) 
		{
			//$('#waterfall').addClass("animated rotateInDownRight");
			(new TimelineLite({onComplete:initScrollAnimations}))
				.to( $('#screen'), 1, {css:{opacity:.99, 'margin-top':0, left:'2000px', top:'-200px'}, delay:1, ease:Elastic.easeOut});
			//$('#waterfall').css({'[visibility]':'[visible]'});
			//$('#screen').hide();
			screen_textshow();			
		}
		else if(position.top===0 && wintop>450 && wintop<550) 
		{
			$('#screen').show();
			function initScrollAnimations_screen() {
					$('#grow_div').css('display','block');
					var controller = $.superscrollorama();			
					// title tweens								
						controller.addTween(4, TweenMax.to('#screen', 2, {css:{top: 250, left:0, rotation:-360,}, ease:Quad.easeOut}));				
							};
			initScrollAnimations_screen();
			screen_textshow();
		}
//			////screen leave
		else if(position.top===0 && wintop>550 && wintop<650)
		{
				//if(wintop>2850 && wintop<3250)
				//{
			function initScrollAnimations_screen() {
				var controller = $.superscrollorama();	
				controller.pin($('#grow_div'),300, {
						anim: (new TimelineLite())
							.append(
								TweenMax.fromTo($('#screen'), 4, 
									{css:{left:0, top: 250, rotation: -360}, immediateRender:true}, 
									{css:{left:-1000, top: -1000, rotation: 360}},{css:{left:250, top:0}})
    									)
						})
				};
				initScrollAnimations_screen();
				screen_textshow();

			//console.log("x-"+wintop);
			//console.log("y-"+position.top);

			}
			else if(position.top===0 && wintop>650)
			{
				$('screen').hide();
			}
//		
//		//罩子
		if(position.top===0 && wintop>650 && wintop<750) 
		{
			//$('#waterfall').addClass("animated rotateInDownRight");
			(new TimelineLite({onComplete:initScrollAnimations}))
				.to( $('#glass'), 2, {css:{opacity:.99, left:'2000px', top:'-200px'}, delay:1, ease:Elastic.easeOut});
			//$('#waterfall').css({'[visibility]':'[visible]'});
			$('#glass').hide();
			
		}
		else if(position.top===0 && wintop>750 && wintop<850) 
		{
			$('#screen').hide();
			$('#glass').show();
			function initScrollAnimations_glass() {
					$('#grow_div').css('display','block');
					var controller = $.superscrollorama();			
					// title tweens								
						controller.addTween(1, TweenMax.to('#glass', 3, {css:{top: 0, left: 0, rotation:-360,}, ease:Quad.easeOut}));	
						//console.log('1111');			
							};
			initScrollAnimations_glass();
			glass_textshow();
		}
		else if(position.top===0 && wintop>850 && wintop<950) 
		{
//			$('#screen').hide();
//			$('#glass').show();
			function initScrollAnimations_glass_stay() {
					$('#grow_div').css('display','block');
					$('#glass').css({'[top]':'[210px]','[left]':'[500px]'});        
							};
			initScrollAnimations_glass_stay();			
			glass_textshow_4();
		}
//
		else if(position.top>=0 && wintop>950 && wintop<1050)
			{
				//if(wintop>2850 && wintop<3250)
				//{
				//function initScrollAnimations_glass_go() {
//					var controller = $.superscrollorama();	
//					controller.pin($('#grow_div'),300, {
//							anim: (new TimelineLite())
//								.append(
//									TweenMax.fromTo($('#glass'), 4, 
//										{css:{left:0, top: 0, rotation: -360}, immediateRender:true}, 
//										{css:{left:-1000, top: -300, rotation: 360}})
//										)
//						})
//				};
//				initScrollAnimations_glass_go();
				function initScrollAnimations_glass_stay() {
					$('#grow_div').css('display','block');
					$('#glass').css({'[top]':'[210px]','[left]':'[500px]'});        
							};
			initScrollAnimations_glass_stay();	
				glass_textshow_5();

			//console.log("x-"+wintop);
//			console.log("y-"+position.top);

			}
			else if(position.top>=0 && wintop>1050)
			{
				$('#glass').show();
				glass_textshow_5();
			}
			
			var clean=$('#clean').position();
			if(clean.top>=0 && wintop>4350 && wintop<4650)
			{
				scroll_1();
			}
			else if(clean.top>=0 && wintop>4650 && wintop<4850)
			{
				scroll_3();
			}
			else if(clean.top>=0 && wintop>4850)
			{
				scroll_4();
			}
//			
	});

						
</script>
</body>
</html>
